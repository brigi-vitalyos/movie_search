= form_tag(movies_search_path) do
  .d-flex.gap-2.justify-content-center.py-3.col-lg-6.mx-auto
    = text_field_tag :query_string, params["query_string"], class: "form-control d-inline-flex align-items-center"
    = submit_tag "Search", class: "btn btn-primary d-inline-flex align-items-center"


.d-flex.gap-2.justify-content-center.py-3
  - unless @cache_hit_count.nil?
    - if @cache_hit_count == 0
      %span.badge.d-flex.p-2.align-items-center.text-bg-primary.rounded-pill
        %span.px-1= "You get this result from the API directly"
    - else
      %span.badge.d-flex.p-2.align-items-center.text-bg-success.rounded-pill
        %span.px-1= "You get this result from the cache! :)"

- unless @movies.nil?
  - if @movies.empty?
    %p No results found :(
  - else
    .row.row-cols-1.row-cols-sm-2.row-cols-md-5.g-2
      - @movies.each do |movie|
        .col
          .card.shadow-sm
            =image_tag "https://image.tmdb.org/t/p/original/#{movie.poster_path}", class: "bd-placeholder-img card-img-top shadow-sm"
            .card-body
              %h5.card-text= movie.title
              %p.card-text= movie.description.truncate(150)
              .d-flex.justify-content-between.align-items-center
                .btn-group
                  =button_tag "View", class:"btn btn-sm btn-outline-secondary"
                %small.text-body-secondary="Popularity: 11"